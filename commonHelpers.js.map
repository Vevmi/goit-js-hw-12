{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\"\nexport function searchImages(imageName, page) {\n    const BASE_URL = \"https://pixabay.com/api/\"\n    const params = {\n        key: '11070675-9db3ad99120a3eae94c3d42ec',\n        q: imageName,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n    }\nreturn axios.get(BASE_URL,{params})\n}","\nfunction imgTemlate({  downloads, views, likes, comments, largeImageURL }) {\n    return `            <li class=\"card-item\">\n        <a href=\"${largeImageURL}\"><img class=\"card-img\" src=\"${largeImageURL}\" alt=\"\" title=\"\" /></a>\n        <div>\n          <span class=\"description\">\n            <p class=\"card-title\">\n              Downloads: <span class=\"card-text\">${downloads}</span>\n            </p>\n            <p class=\"card-title\">\n              Likes: <span class=\"card-text\">${likes}</span>\n            </p>\n            <p class=\"card-title\">\n              Views: <span class=\"card-text\">${views}</span>\n            </p>\n            <p class=\"card-title\">\n              Comments: <span class=\"card-text\">${comments}</span>\n            </p></span\n          >\n        </div>\n      </li>`\n}\nexport function imgsTemplate(arr) {\n    return arr.map(imgTemlate).join(' ');\n}\n","import { searchImages } from './js/pixabay-api';\nimport { imgsTemplate } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {});\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtnElem = document.querySelector('.load-more-btn');\nlet page;\nlet userData;\nlet maxPage;\nconst per_page = 15;\n\nconst formElem = document.querySelector('.search-form');\nformElem.addEventListener('submit', async e => {\n  e.preventDefault();\n  page = 1;\n  userData = formElem.elements.searchQuery.value;\n  if (!userData) {\n    iziToast.error({\n      message: 'Feild should not be empty!',\n    });\n    return;\n  }\n  showLoader();\n  try {\n    const { data } = await searchImages(userData, page);\n    const markup = imgsTemplate(data.hits);\n    gallery.innerHTML = markup;\n    lightbox.refresh();\n      if (data.hits.length == 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n          return\n    }\n    maxPage = Math.ceil(data.totalHits / per_page);\n  } catch {\n    iziToast.error({\n      message: 'Enter something',\n    });\n  }\n  hideLoader();\n  updateBtnStatus();\n});\n\nloadBtnElem.addEventListener('click', async e => {\n  searchImages(userData, page);\n  page += 1;\n  showLoader();\n  try {\n    const { data } = await searchImages(userData, page);\n    const markup = imgsTemplate(data.hits);\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  } catch {\n    console.log('Try later');\n  }\n  hideLoader();\n    updateBtnStatus();\n    scroll();\n});\n\nfunction showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nfunction showLoadBtn() {\n  loadBtnElem.classList.remove('is-hidden');\n}\n\nfunction hideLoadBtn() {\n  loadBtnElem.classList.add('is-hidden');\n}\n\nfunction updateBtnStatus() {\n  if (page >= maxPage) {\n      hideLoadBtn();\n      iziToast.info({\n      message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n    });\n  } else {\n    showLoadBtn();\n    }\n}\nfunction scroll() {\n    const cardHeiht = gallery.firstElementChild.getBoundingClientRect().height;\n    scrollBy({ 'behavior': 'smooth', 'top': cardHeiht*3});\n}"],"names":["searchImages","imageName","page","BASE_URL","params","axios","imgTemlate","downloads","views","likes","comments","largeImageURL","imgsTemplate","arr","lightbox","SimpleLightbox","gallery","loader","loadBtnElem","userData","maxPage","per_page","formElem","e","iziToast","showLoader","data","markup","hideLoader","updateBtnStatus","scroll","showLoadBtn","hideLoadBtn","cardHeiht"],"mappings":"owBACO,SAASA,EAAaC,EAAWC,EAAM,CAC1C,MAAMC,EAAW,2BACXC,EAAS,CACX,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACb,EACL,OAAOG,EAAM,IAAIF,EAAS,CAAC,OAAAC,CAAM,CAAC,CAClC,CCZA,SAASE,EAAW,CAAG,UAAAC,EAAW,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,cAAAC,GAAiB,CACvE,MAAO;AAAA,mBACQA,CAAa,gCAAgCA,CAAa;AAAA;AAAA;AAAA;AAAA,mDAI1BJ,CAAS;AAAA;AAAA;AAAA,+CAGbE,CAAK;AAAA;AAAA;AAAA,+CAGLD,CAAK;AAAA;AAAA;AAAA,kDAGFE,CAAQ;AAAA;AAAA;AAAA;AAAA,YAK1D,CACO,SAASE,EAAaC,EAAK,CAC9B,OAAOA,EAAI,IAAIP,CAAU,EAAE,KAAK,GAAG,CACvC,CCdA,MAAMQ,EAAW,IAAIC,EAAe,aAAc,CAAE,CAAA,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIhB,EACAiB,EACAC,EACJ,MAAMC,EAAW,GAEXC,EAAW,SAAS,cAAc,cAAc,EACtDA,EAAS,iBAAiB,SAAU,MAAMC,GAAK,CAI7C,GAHAA,EAAE,eAAc,EAChBrB,EAAO,EACPiB,EAAWG,EAAS,SAAS,YAAY,MACrC,CAACH,EAAU,CACbK,EAAS,MAAM,CACb,QAAS,4BACf,CAAK,EACD,MACD,CACDC,IACA,GAAI,CACF,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAM1B,EAAamB,EAAUjB,CAAI,EAC5CyB,EAASf,EAAac,EAAK,IAAI,EAGnC,GAFFV,EAAQ,UAAYW,EACpBb,EAAS,QAAO,EACVY,EAAK,KAAK,QAAU,EAAG,CAC3BF,EAAS,MAAM,CACb,QACE,0EACV,CAAO,EACG,MACL,CACDJ,EAAU,KAAK,KAAKM,EAAK,UAAYL,CAAQ,CACjD,MAAU,CACNG,EAAS,MAAM,CACb,QAAS,iBACf,CAAK,CACF,CACDI,IACAC,GACF,CAAC,EAEDX,EAAY,iBAAiB,QAAS,MAAMK,GAAK,CAC/CvB,EAAamB,EAAUjB,CAAI,EAC3BA,GAAQ,EACRuB,IACA,GAAI,CACF,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAM1B,EAAamB,EAAUjB,CAAI,EAC5CyB,EAASf,EAAac,EAAK,IAAI,EACrCV,EAAQ,mBAAmB,YAAaW,CAAM,EAC9Cb,EAAS,QAAO,CACpB,MAAU,CACN,QAAQ,IAAI,WAAW,CACxB,CACDc,IACEC,IACAC,GACJ,CAAC,EAED,SAASL,GAAa,CACpBR,EAAO,UAAU,OAAO,WAAW,CACrC,CAEA,SAASW,GAAa,CACpBX,EAAO,UAAU,IAAI,WAAW,CAClC,CAEA,SAASc,GAAc,CACrBb,EAAY,UAAU,OAAO,WAAW,CAC1C,CAEA,SAASc,GAAc,CACrBd,EAAY,UAAU,IAAI,WAAW,CACvC,CAEA,SAASW,GAAkB,CACrB3B,GAAQkB,GACRY,IACAR,EAAS,KAAK,CACd,QAAS,4DACf,CAAK,GAEDO,GAEJ,CACA,SAASD,GAAS,CACd,MAAMG,EAAYjB,EAAQ,kBAAkB,sBAAqB,EAAG,OACpE,SAAS,CAAE,SAAY,SAAU,IAAOiB,EAAU,CAAC,CAAC,CACxD"}